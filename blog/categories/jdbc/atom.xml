<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Jdbc | An Architect's View]]></title>
  <link href="https://corfield.org/blog/categories/jdbc/atom.xml" rel="self"/>
  <link href="https://corfield.org/"/>
  <updated>2020-05-23T14:54:33-07:00</updated>
  <id>https://corfield.org/</id>
  <author>
    <name><![CDATA[Sean Corfield]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[next.jdbc Compendium]]></title>
    <link href="https://corfield.org/blog/2020/05/23/next-jdbc/"/>
    <updated>2020-05-23T13:55:00-07:00</updated>
    <id>https://corfield.org/blog/2020/05/23/next-jdbc</id>
    <content type="html"><![CDATA[<h2>seancorfield/next.jdbc 1.0.445</h2>

<p>This morning I released <a href="https://github.com/seancorfield/next-jdbc/releases/tag/v1.0.445">1.0.445</a> and realized it&rsquo;s the sixth release since I last mentioned it in a blog post, so I thought it would be helpful to summarize all of the changes made so far in 2020. 1.0.13 came out at the end of December and I decided to switch from MAJOR.MINOR.PATCH versioning to MAJOR.MINOR.COMMITS versioning since I&rsquo;d already made the commitment to no breaking changes &ndash; only fixative/accretive changes &ndash; when the library originally moved from Alpha to Beta a year ago.</p>

<p>Unlike the change log and release notes which are chronological, this post is organized into fixative changes, accretive changes, and documentation improvements, with each section organized by functionality or by database as appropriate.<!-- more --></p>

<h3>Bug Fixes</h3>

<ul>
<li><code>next.jdbc.result-set</code>

<ul>
<li>Fixed an edge case in how qualified column names are constructed when either the table name is unavailable or the <code>:qualifier-fn</code> results <code>nil</code> or an empty string.</li>
<li>Fixed how <code>:qualifier-fn</code> is used when the table name is unavailable so that <code>:qualifier-fn (constantly "qual")</code> works the same way as <code>clojure.java.jdbc</code>&rsquo;s <code>:qualifier "qual"</code> option, which makes migration easier, as well as making use of <code>:qualifier-fn</code> more consistent.</li>
<li>Improved performance of some result set building code (poor performance is a bug!).</li>
</ul>
</li>
</ul>


<h3>Enhancements</h3>

<ul>
<li><code>next.jdbc/plan</code>

<ul>
<li>Added <code>InspectableMapifiedResultSet</code> protocol that provides &ldquo;meta&rdquo; information access from the abstract row that is passed into the reducing function used on the <code>IReduceInit</code> produced by <code>plan</code>. Currently, this exposes the current <code>row-number</code> (from the underlying <code>ResultSet</code>) and the <code>column-names</code> &ndash; a vector of column name keywords, in &ldquo;natural&rdquo; order based on the SQL query, produced by the builder function passed into <code>plan</code>. These functions are only available from <code>plan</code> (or a <code>datafiable-row</code> produced from <code>plan</code>) &ndash; they are not available on the results of <code>execute!</code> or <code>execute-one!</code> &ndash; and additional functions will probably be added over time.</li>
<li>Use of <code>plan</code> with array-based builders has been made easier by adding support for numeric <code>Associative</code> keys and <code>Indexed</code> access (<code>nth</code>) to read column values by index, instead of by label.</li>
</ul>
</li>
<li><code>next.jdbc/with-transaction</code>

<ul>
<li>If you call this with an existing <code>Connection</code>, it is mutated to set up and commit (or rollback) the transaction. This made concurrent execution unpredictable so this is now synchronized via <code>locking</code>. It is recommended to use <code>with-transaction</code> on a <code>DataSource</code> anyway, but this makes the <code>Connection</code> case more predictable.</li>
</ul>
</li>
<li><code>next.jdbc.connection</code>

<ul>
<li>Improved the error messages when an unknown <code>:dbtype</code> is used and clarified how to use <code>:classname</code>.</li>
<li>Added <code>component</code> function for built-in support of the <a href="https://github.com/stuartsierra/component">Component library</a> when creating a connection pooled datasource. Note that Component is not a dependency so you can simply ignore this feature if you don&rsquo;t use Component.</li>
<li>The result of calling <code>get-datasource</code> on a db-spec hash map now supports <code>.getLoginTimeout</code> and <code>.setLoginTimeout</code> to match <code>javax.sql.DataSource</code> and improve <code>next.jdbc</code>&rsquo;s support for timeouts.</li>
<li>MariaDB is supported out of the box.</li>
</ul>
</li>
<li><code>next.jdbc.date-time</code>

<ul>
<li>Add <code>read-as-instant</code> and <code>read-as-local</code> functions to extend <code>ReadableColumn</code> so that SQL <code>DATE</code> and <code>TIMESTAMP</code> columns can be read as Java Time types.</li>
</ul>
</li>
<li><code>next.jdbc.specs</code>

<ul>
<li>The Spec for JDBC URL strings explicitly requires that they start with <code>jdbc:</code> to match the behavior of the code (and the JDBC specification), which can improve error messages when you use <code>instrument</code>.</li>
</ul>
</li>
<li>Options:

<ul>
<li><code>:return-keys</code> now accepts both keywords and strings in the vector of keys to return (the documentation, code, and Spec were in conflict so allowing both was the safest choice).</li>
</ul>
</li>
</ul>


<h3>Documentation</h3>

<p>I try to improve the documentation in each release, based on feedback via Slack and GitHub. The bullet points below are what I consider to be just the most notable improvements.</p>

<ul>
<li><strong>README</strong>

<ul>
<li>Promote the stable documentation on <a href="https://cljdoc.org/d/seancorfield/next.jdbc">cljdoc.org</a> and make it clear the GitHub documentation is for changes made since the last release.</li>
</ul>
</li>
<li><strong>Getting Started</strong>

<ul>
<li>Make it clearer that <code>plan</code> requires <code>reduce</code> or some sort of reduction process.</li>
<li>Shows how to work with database metadata (this information was previously only mentioned in the <code>clojure.java.jdbc</code> migration guide).</li>
</ul>
</li>
<li><strong>Tips &amp; Tricks</strong>

<ul>
<li>This has been split out from <strong>Friendly SQL Functions</strong> and now contains a lot more information.</li>
<li>Timeouts: Four different types of timeout are explained, along with how <code>next.jdbc</code> supports them.</li>
<li>MySQL: How to stream result sets; <code>BLOB</code> columns are returned as <code>byte[]</code>, not <code>java.sql.Blob</code>.</li>
<li>PostgreSQL: How to stream result sets; Examples of how to work with SQL array types; Clarify the need for <code>next.jdbc.date-time</code> for <code>java.util.Date</code> conversion (this is also mentioned in <strong>Getting Started</strong>).</li>
</ul>
</li>
<li><code>next.jdbc.prepare/execute-batch!</code> now has an example of how to get generated keys from a batch insert.</li>
</ul>


<h2>Thanks!</h2>

<p>As always, thanks to everyone who uses <code>next.jdbc</code>, thanks to everyone who has provided feedback (especially on the documentation), reported bugs, suggested improvements, or sent pull requests. <code>next.jdbc</code> wouldn&rsquo;t be what it is today without all that input!</p>

<p>See the <a href="https://github.com/seancorfield/next-jdbc/blob/master/CHANGELOG.md">change log</a> for all the changes in release order and <a href="https://cljdoc.org/d/seancorfield/next.jdbc">cljdoc.org</a> for overall documentation of the latest release.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Happy New Releases!]]></title>
    <link href="https://corfield.org/blog/2019/12/31/releases/"/>
    <updated>2019-12-31T15:59:59-08:00</updated>
    <id>https://corfield.org/blog/2019/12/31/releases</id>
    <content type="html"><![CDATA[<h1>Wrapping Up 2019</h1>

<p>It&rsquo;s been a while since I blogged about the projects I maintain so I figured New Year&rsquo;s Eve 2019 was a good time to provide an update!</p>

<h2>expectations/clojure-test 1.2.1</h2>

<p>Mocking in <code>side-effects</code>, optional message argument in <code>expect</code> (like <code>is</code>), <code>between</code> predicate, official support for Clojure 1.8 onward, lots of documentation improvements!</p>

<p>See the <a href="https://github.com/clojure-expectations/clojure-test/blob/master/CHANGELOG.md">change log</a> for more details.</p>

<h2>jkk/honeysql 0.9.8</h2>

<p>Lots of bug fixes, some enhancements (<code>composite</code>, <code>truncate</code>), and some documentation enhancements.</p>

<p>See the <a href="https://github.com/jkk/honeysql/blob/master/CHANGES.md">change log</a> for more details.</p>

<h2>org.clojure/core.cache 0.8.2</h2>

<p>Add <code>clojure.core.cache.wrapped</code> to make using the library easier!</p>

<p>See the <a href="https://github.com/clojure/core.cache/blob/master/README.md#change-log">change log</a> for more details.</p>

<h2>org.clojure/core.memoize 0.8.2</h2>

<p>Bug fixes and a new <code>memoizer</code> function that makes it easier to define custom function caches.</p>

<p>See the <a href="https://github.com/clojure/core.memoize/blob/master/README.md#change-log">change log</a> for more details.</p>

<h2>org.clojure/java.data 0.1.5</h2>

<p>Yup, I took over maintenance of this in October!</p>

<p><code>set-properties</code> to set arbitrary properties post-construction, constructor argument support, numerous bug fixes and reflection warnings addressed.</p>

<p>See the <a href="https://github.com/clojure/java.data/blob/master/README.md#change-log">change log</a> for more details.</p>

<h2>org.clojure/java.jdbc 0.7.11</h2>

<p>This library is officially &ldquo;stable&rdquo; and no longer being actively maintained beyond critical bug fixes &ndash; please consider migrating to <code>seancorfield/next.jdbc</code> (see below).</p>

<p>That said, this got the same transaction rollback exception edge case fix and Turkish locale fix that <code>next.jdbc</code> already had.</p>

<p>See the <a href="https://github.com/clojure/java.jdbc/blob/master/README.md#change-log">change log</a> for more details.</p>

<h2>seancorfield/clj-new 0.8.2</h2>

<p>AOT compilation in <code>app</code> uberjar, <code>pom.xml</code> generation, <code>:uberjar</code> in <code>app</code> and <code>:jar</code> in <code>lib</code> and <code>template</code> projects, <code>-?</code> / <code>--query</code> option to explain what <code>clj-new</code> will attempt to do, <code>-e</code> / <code>--env</code> option to define &ldquo;environment&rdquo; variables that set substitution values in project templates, dependency updates, documentation improvements.</p>

<p>See the <a href="https://github.com/seancorfield/clj-new/blob/master/CHANGELOG.md">change log</a> for more details.</p>

<h2>seancorfield/depstar 0.4.2</h2>

<p>Support for Multi-Release JARs, AOT compilation for uberjars (with <code>pom.xml</code>), JDK 11 support, better handling of unknown file types.</p>

<p>See the <a href="https://github.com/seancorfield/depstar#changes">change log</a> for more details.</p>

<h2>seancorfield/next.jdbc 1.0.13</h2>

<p><code>next.jdbc.prepare/statement</code> and support for <code>java.sql.Statement</code>, arbitrary <code>Connection</code> and <code>Statement</code> property support, fix transaction rollback exception edge case (thank you Jepsen!), expose SQL builders, now tested against MS SQL Server and MySQL (formally), provide additional date/time/timestamp conversion support, CLOB support, <code>:jdbcUrl</code> support, HugSQL quick start guide, result set builder adapters, expanded Tips &amp; Tricks, lots of documentation enhancements!</p>

<p>See the <a href="https://github.com/seancorfield/next-jdbc/blob/master/CHANGELOG.md">change log</a> for more details.</p>

<h2>seancorfield/dot-clojure</h2>

<p>If you are getting started with the <a href="https://clojure.org/guides/deps_and_cli">Clojure CLI and <code>deps.edn</code></a> then you might want to check out my <a href="https://github.com/seancorfield/dot-clojure">.clojure/deps.edn file</a> which contains a lot of useful aliases and hints &amp; tips to get you up and running with a powerful set of composable tools: create new projects, start various types of REPLs, run tests &ndash; against multiple versions of Clojure, build JARs and uberjars, benchmark your code, check for outdated dependencies, and more!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Release! Release! Release!]]></title>
    <link href="https://corfield.org/blog/2019/08/07/releases/"/>
    <updated>2019-08-07T08:30:00-07:00</updated>
    <id>https://corfield.org/blog/2019/08/07/releases</id>
    <content type="html"><![CDATA[<h1>Lots of Releases</h1>

<p>Over the last week or so I&rsquo;ve released minor updates to several of the projects I maintain, so I thought it would be nice to have a summary blog post rather than a scattering of minor announcements.</p>

<h2>clj-time 0.15.2</h2>

<p>Add type hints, fix a bug in <code>overlaps?</code>, improve tests and documentation.</p>

<p>See the <a href="https://github.com/clj-time/clj-time/blob/master/ChangeLog.md">change log</a> for more details.</p>

<h2>jkk/honeysql 0.9.5</h2>

<p>Support JDK11 for dev/test, support Turkish language users, enhance <code>format-predicate</code> to match <code>format</code> (<code>parameterizer</code>).</p>

<p>See the <a href="https://github.com/jkk/honeysql/blob/master/CHANGES.md">change log</a> for more details.</p>

<h2>seancorfield/clj-new 0.7.7</h2>

<p>Pin Clojure (and <code>test.check</code>) version in generated projects instead of using <code>"RELEASE"</code>.</p>

<p>See the <a href="https://github.com/seancorfield/clj-new/blob/master/CHANGELOG.md">change log</a> for more details.</p>

<h2>seancorfield/depstar 0.3.1</h2>

<p>Add <code>-m</code> / <code>--main</code> option to override <code>Main-Class</code> in generated manifest.</p>

<p>See the <a href="https://github.com/seancorfield/depstar#changes">change log</a> for more details.</p>

<h2>seancorfield/next.jdbc 1.0.5</h2>

<p><code>plan</code>&rsquo;s &ldquo;mapified&rdquo; <code>ResultSet</code> is now a full <code>IPersistentMap</code> implementation which adds support for <code>cons</code>, <code>count</code>, <code>dissoc</code>, <code>empty</code>, etc. Continued improvements to documentation.</p>

<p>See the <a href="https://github.com/seancorfield/next-jdbc/blob/master/CHANGELOG.md">change log</a> for more details.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Next.JDBC to 1.0.0 and Beyond!]]></title>
    <link href="https://corfield.org/blog/2019/07/04/next-jdbc/"/>
    <updated>2019-07-04T03:00:00-07:00</updated>
    <id>https://corfield.org/blog/2019/07/04/next-jdbc</id>
    <content type="html"><![CDATA[<h1>next.jdbc 1.0.0 and 1.0.1</h1>

<p>First off, <a href="https://github.com/seancorfield/next-jdbc/releases/tag/v1.0.0">seancorfield/next.jdbc 1.0.0</a> was released on June 13th, 2019 (and I <a href="https://clojureverse.org/t/next-jdbc-1-0-0-the-gold-release/4379">announced it on ClojureVerse</a> but did not blog about it), and yesterday I released <a href="https://github.com/seancorfield/next-jdbc/releases/tag/v1.0.1">seancorfield/next.jdbc 1.0.1</a> which is mostly documentation improvements.</p>

<p>Someone recently commented that this blog had the <a href="https://corfield.org/blog/2019/06/04/next-jdbc/">Release Candidate announcement</a> on June 4th and was surprised I didn&rsquo;t &ldquo;make a big deal&rdquo; about the &ldquo;gold&rdquo; release. The 1.0.0 release is a <strong>big deal</strong> and this blog post is about that &ndash; what it&rsquo;s taken to get here and what&rsquo;s to come.<!-- more --></p>

<h2>clojure.contrib.sql</h2>

<p>I learned Clojure back in 2010 and started using it at work in early 2011. For us to use it in production, we needed JDBC support but <code>clojure.contrib.sql</code> was not being actively maintained at that point and the Clojure 1.3 release was in its Alpha phase. Part of the 1.3 release cycle involved <a href="https://clojure.org/community/contrib_history">breaking up the &ldquo;Monolithic Contrib&rdquo; from the 1.2 release and finding new maintainers</a> in order for its parts to move forward. That&rsquo;s how I became the maintainer of <a href="https://github.com/clojure/java.jdbc"><code>clojure.java.jdbc</code></a> &ndash; <code>clojure.contrib.sql</code>&rsquo;s new name and home. <code>clojure.java.jdbc</code> started life with an 0.0.1 release.</p>

<h2>clojure.java.jdbc</h2>

<p>The 0.0.x releases mostly focused on compatibility with more databases and ease of use enhancements.</p>

<p>0.1.0 rewrote the result set handling to use regular Clojure hash maps instead of the deprecated <code>struct-map</code> machinery, hence the bump in version numbers. The 0.1.x releases continued to expand database support, expand the API, and fix bugs.</p>

<p>0.2.0 merged the internal namespace into the main <code>clojure.java.jdbc</code> namespace and adjusted the visibility (and naming) of several symbols, hence the bump in version numbers. The 0.2.x releases continued the path of improving database support, improving usability, fixing bugs, and some performance improvements.</p>

<p>0.3.0 was a fairly massive overhaul of the API &ndash; these were definitely breaking changes, as most of the existing API was deprecated (based on the dynamic <code>*db*</code> variable), and a new API introduced (which accepted the db spec everywhere as an argument, including the first versions of <code>insert!</code>, <code>query</code>, <code>update!</code>, <code>delete!</code>, and <code>execute!</code>). 0.3.0 also introduced <code>IResultSetReadColumn</code> and <code>ISQLValue</code> as extension points. Prerelease builds of 0.3.0 introduced a mini-DSL for building SQL but that was removed before the gold release &ndash; the DDL support stayed, however. The 0.3.x releases mostly focused on bug releases after the big upheaval in the API, and adding support for more and more options. The modern &ldquo;db-spec&rdquo; with <code>:dbtype</code> and <code>:dbname</code> was introduced during this time.</p>

<p>0.4.0 dropped support for Clojure 1.2 and the 0.4.x releases fixed bugs, broadened database support, and added yet more options.</p>

<p>0.5.0 dropped support for Clojure 1.3 and 0.5.5 started the shift from &ldquo;named&rdquo; arguments (unrolled keyword arguments) to passing options in a single hash map, which makes it much easier to compose function calls. The 0.5.x releases continued deprecation of the unrolled keyword arguments.</p>

<p>0.6.0 removed all deprecated APIs and signatures. This was a pretty volatile time to be using <code>clojure.java.jdbc</code>. There was a 0.6.1 release but the upcoming 0.6.2 release became a series of 0.7.0 prerelease builds as I replumbed the functions to correctly pass options through the entire chain, and dropped support for Clojure 1.4, 1.5, and finally 1.6&hellip; This also saw the introduction of <code>reducible-query</code> (which laid the groundwork for <code>next.jdbc</code>).</p>

<p>By the time 0.7.0 was released, I was beginning to think more seriously about a 1.0.0 release. The 0.7.x releases continued to expand database support, to add more and more options, and also started to look at performance improvements.</p>

<h2>Contrib Evolving</h2>

<p>I&rsquo;d solicited feedback from the Clojure/core folks about what it would mean for a 1.0.0 release at various points, starting as far back as the 0.3x series of releases, and I&rsquo;d been folding that feedback into the various changes over time. Also, over time, it became clear that Clojure/core were less worried about placing restrictions on how maintainers ran their projects. Some Contrib libraries had their 1.0.0 releases and continued on, some were still in the 0.0.x phase, others run the gamut from 0.1.x to 0.10.x.</p>

<p>It&rsquo;s good to read <a href="https://clojure.org/news/2012/02/17/clojure-governance">Stuart Sierra&rsquo;s post from 2012</a> about how Clojure (and Contrib&rsquo;s) governance evolved over the years, as well as the <a href="https://clojure.org/community/contrib_libs">current state of Contrib libraries</a>. In addition to the recent clarifications about Contrib&rsquo;s purpose and governance, we&rsquo;ve seen <code>clojure.tools.nrepl</code> fork back out of Contrib as <a href="https://github.com/nrepl/nrepl">nrepl/nrepl</a> and a lot of adjustment in tooling to adapt to the new group, artifact, and namespace names.</p>

<p>It was in this environment that I continued to think about what a 1.0.0 release of <code>clojure.java.jdbc</code> should be. At Clojure/conj (2018), I was excited about <a href="https://github.com/cognitect-labs/REBL-distro">REBL</a> and <code>datafy</code>/<code>nav</code>, and I introduced <a href="https://corfield.org/blog/2018/12/03/datafy-nav/">experimental support for all that in <code>clojure.java.jdbc</code></a>. I was also thinking about <code>clojure.spec</code> and the shift to qualified keywords and the increased use of transducers and the focus on simplicity and consistency&hellip;</p>

<h2>The Birth of next.jdbc</h2>

<p>It was around that point that I realized that I wouldn&rsquo;t really be comfortable declaring a 1.0.0 release on <code>clojure.java.jdbc</code>: there was no natural &ldquo;end state&rdquo; and it had become large and complex (and slow in places) &ndash; and I couldn&rsquo;t realistically change that without making a whole &lsquo;nother round of breaking changes. But this time I heeded <a href="https://www.youtube.com/watch?v=oyLBGkS5ICk">Rich&rsquo;s advice about accretion and fixation</a> and started to design the &ldquo;next&rdquo; version of <code>clojure.java.jdbc</code> not as a series of (breaking) changes to what already existed but as a completely new set of functions built on a completely new set of implementations, based on what I&rsquo;d learned from nearly eight years of maintaining <code>clojure.java.jdbc</code>.</p>

<p>I talk about my <a href="https://github.com/seancorfield/next-jdbc#motivation">motivation for this new JDBC wrapper</a> in the project README but I&rsquo;ll provide a bullet point recap here as well:</p>

<ul>
<li>Improve performance,</li>
<li>Provide a &ldquo;modern&rdquo; Clojure approach/API,</li>
<li>Provide a simpler library/API.</li>
</ul>


<p>I spent a month or so sketching out what this new version of the library would look like and how it would behave using a local git repository (stored on OneDrive). I first mentioned that I was working on it in early January (in <a href="https://clojureverse.org/t/what-http-server-library-to-use/3423/29?u=seancorfield">a thread about HTTP servers on ClojureVerse</a>, of all places) and moved it into a private GitHub repository, once I had usable code. Over the next three months, I continued to develop it until the first public release on April 21st: 1.0.0-alpha8. Over the next month, I gathered feedback from anyone who was willing to use it, making a few small adjustments in the API, until the first stable release on May 25th: 1.0.0-beta1.</p>

<p>One of the key decisions I had to make was whether this would become new namespaces inside <code>clojure.java.jdbc</code> in Contrib or live standalone somewhere &ndash; because I viewed it very much as the &ldquo;next version&rdquo; of that Contrib library. I was surprised that no one seemed to care if a library was published under someone&rsquo;s name as a group ID, nor even if the namespaces themselves contained someone&rsquo;s name. I&rsquo;d viewed Contrib&rsquo;s well-maintained Continuous Integration system and automated documentation generator as pros, along with my perception that Contrib libraries were easy to find and had some stamp of &ldquo;authority&rdquo; by virtue of being in the <code>clojure</code> GitHub organization &ndash; but I seemed to be very much in the minority in that perception. Once I had CI set up for <a href="https://circleci.com/gh/seancorfield/next-jdbc"><code>next.jdbc</code> on CircleCI</a> and auto-generated <a href="https://cljdoc.org/d/seancorfield/next.jdbc">documentation for <code>next.jdbc</code> on cljdoc.org</a>, I decided that <code>seancorfield/next.jdbc</code> was going to live on, outside Contrib.</p>

<h2>Beta 1 and Stability</h2>

<p>I mentioned above that I considered Beta 1 to be the first stable release. Having gone through so many breaking changes with <code>clojure.java.jdbc</code> and having listened to Rich (and others in the Clojure community) talk about the need for backward compatibility and the futility of semantic versioning, it was important to me that I could draw a line in the sand at some point and say &ldquo;no more breaking changes&rdquo;. I decided that the move from Alpha to Beta should be that line for <code>next.jdbc</code> and the last breaking change was renaming <code>reducible!</code> to <code>plan</code> as part of the beta release &ndash; indeed, that was the gating factor for exiting the alpha phase of development.</p>

<p>My goal is to never break backward compatibility across future versions of <code>next.jdbc</code> &ndash; only adding new functionality (and fixing things that are clearly broken). I expect future versions to appear slowly and contain very few additional features, perhaps focusing mostly on improving the documentation in response to questions from users of the library.</p>

<h2>Wrapping Up</h2>

<p>I couldn&rsquo;t have made <code>next.jdbc</code> without a lot of lessons learned from eight years of maintaining <code>clojure.java.jdbc</code> and all the feedback from the community &ndash; both on <code>clojure.java.jdbc</code> itself and during the alpha phase of <code>next.jdbc</code>&rsquo;s development. It&rsquo;s faster, more modern, and simpler than <code>clojure.java.jdbc</code>. It embraces the host platform by being based on JDBC types directly, but offers value beyond being &ldquo;just&rdquo; a wrapper for those types and their methods. It looks to the future by yielding qualified keywords by default, supporting <code>datafy</code>, <code>nav</code>, and focusing on reducing/transducing as a core part of the main API (via <code>plan</code>).</p>

<p>I consider <code>next.jdbc</code> to be the 1.0.0 release that <code>clojure.java.jdbc</code> was never going to achieve.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Next.JDBC Release Candidate 1]]></title>
    <link href="https://corfield.org/blog/2019/06/04/next-jdbc/"/>
    <updated>2019-06-04T11:30:00-07:00</updated>
    <id>https://corfield.org/blog/2019/06/04/next-jdbc</id>
    <content type="html"><![CDATA[<h1>seancorfield/next.jdbc 1.0.0-rc1</h1>

<p><code>next.jdbc</code> &ndash; the &ldquo;next generation&rdquo; of <code>clojure.java.jdbc</code> &ndash; is a modern Clojure wrapper for JDBC. The first Release Candidate is now available to test &ndash; containing only accretive and fixative changes from Beta 1. The API should be considered stable enough for production usage.</p>

<p><a href="https://cljdoc.org/d/seancorfield/next.jdbc/1.0.0-rc1/doc/readme">https://cljdoc.org/d/seancorfield/next.jdbc/1.0.0-rc1/doc/readme</a></p>

<p>The focus of this release is providing more flexibility in result set builders, so that it is easier to implement your own naming strategies, via new builders that accept <code>:label-fn</code> and <code>:qualifier-fn</code> options. These mirror the <code>:column-fn</code> and <code>:table-fn</code> options used in <code>next.jdbc.sql</code> &ndash; which are updated versions of <code>clojure.java.jdbc</code>&rsquo;s <code>:entities</code> option. These new builder options are updated versions of <code>clojure.java.jdbc</code>&rsquo;s <code>:identifiers</code> option.</p>

<h2>Changes since Beta 1</h2>

<ul>
<li>Fix #24 by adding return type hints to <code>next.jdbc</code> functions.</li>
<li>Fix #22 by adding <code>next.jdbc.optional</code> with six map builders that omit <code>NULL</code> columns from the row hash maps.</li>
<li>Documentation improvements (#27, #28, and #29), including changing &ldquo;connectable&rdquo; to &ldquo;transactable&rdquo; for the <code>transact</code> function and the <code>with-transaction</code> macro (for consistency with the name of the underlying protocol).</li>
<li>Fix #30 by adding <code>modified</code> variants of column name functions and builders. The <code>lower</code> variants have been rewritten in terms of these new <code>modified</code> variants. This adds <code>:label-fn</code> and <code>:qualifier-fn</code> options that mirror <code>:column-fn</code> and <code>:table-fn</code> for row builders.</li>
</ul>


<p>Please take it for a test drive and let me know if you run into any problems via <a href="https://github.com/seancorfield/next-jdbc/issues">GitHub issues</a> or in the <a href="https://clojurians.slack.com/messages/C1Q164V29/details/"><code>#sql</code> channel on the Clojurians Slack</a> or the <a href="https://clojurians.zulipchat.com/#narrow/stream/152063-sql"><code>#sql</code> stream on the Clojurians Zulip</a>.</p>
]]></content>
  </entry>
  
</feed>
